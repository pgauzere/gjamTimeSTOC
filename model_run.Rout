/usr/share/bash-completion/bash_completion: line 51: shopt: progcomp: invalid shell option name
/usr/share/bash-completion/bash_completion: line 57: complete: command not found
/usr/share/bash-completion/bash_completion: line 62: complete: command not found
/usr/share/bash-completion/bash_completion: line 65: complete: command not found
/usr/share/bash-completion/bash_completion: line 68: complete: command not found
/usr/share/bash-completion/bash_completion: line 71: complete: command not found
/usr/share/bash-completion/bash_completion: line 74: complete: command not found
/usr/share/bash-completion/bash_completion: line 77: complete: command not found
/usr/share/bash-completion/bash_completion: line 80: complete: command not found
/usr/share/bash-completion/bash_completion: line 83: complete: command not found
/usr/share/bash-completion/bash_completion: line 86: complete: command not found
/usr/share/bash-completion/bash_completion: line 89: complete: command not found
/usr/share/bash-completion/bash_completion: line 92: complete: command not found
/usr/share/bash-completion/bash_completion: line 1150: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1154: complete: command not found
/usr/share/bash-completion/bash_completion: line 1395: shopt: hostcomplete: invalid shell option name
/usr/share/bash-completion/bash_completion: line 1587: complete: command not found
/usr/share/bash-completion/bash_completion: line 1638: complete: command not found
/usr/share/bash-completion/bash_completion: line 1747: complete: command not found
/usr/share/bash-completion/bash_completion: line 1756: complete: command not found
/usr/share/bash-completion/bash_completion: line 1811: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1868: complete: command not found
/usr/share/bash-completion/bash_completion: line 1940: complete: command not found
/usr/share/bash-completion/bash_completion: line 1956: complete: command not found
/etc/bash_completion.d/grub: line 170: complete: command not found
/etc/bash_completion.d/grub: line 175: complete: command not found
/etc/bash_completion.d/grub: line 202: complete: command not found
/etc/bash_completion.d/grub: line 223: complete: command not found
/etc/bash_completion.d/grub: line 309: complete: command not found
/etc/bash_completion.d/grub: line 331: complete: command not found
/etc/bash_completion.d/grub: line 362: complete: command not found
/etc/bash_completion.d/grub: line 404: complete: command not found
/etc/bash_completion.d/grub: line 426: complete: command not found
/etc/bash_completion.d/grub: line 464: complete: command not found
/etc/bash_completion.d/grub: line 486: complete: command not found

R version 4.1.0 (2021-05-18) -- "Camp Pontanezen"
Copyright (C) 2021 The R Foundation for Statistical Computing
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> # library(tidyverse)
> library(devtools)
Loading required package: usethis
> library(gjam)
> # library(see)
> # theme_set(theme_modern())
> 
> # library(repmis)
> # library(maps)
> # library(DescTools)
> # d <- "https://github.com/jimclarkatduke/gjam/blob/master/gjamTimeFunctions.R?raw=True"
> # source_url(d)
> 
> source("gjamTimeFunctions.R")
> load("data_for_model_run.Rdata")
> 
> ################################################################################
> # SET PRIORS
> ################################################################################
> 
> #------------------------------------------------------------------------------
> # Beta Priors: Density-Independent Environment Effects ( B * x * x' )
> #------------------------------------------------------------------------------
> # Beta parameter estimates the amount of em-/immigration into/out of each plot
> # that is affected by each covariate.
> 
> # FORMULAE
> formulaB <- as.formula(~ temp)
> 
> # PRIORS
> priorB <- list(lo = list(temp =-0.1),
+                hi = list(temp =0.5) )
> 
> #------------------------------------------------------------------------------
> # Rho Priors: Density-Dependent Environment-Species Effects ( R * v * v' )
> #------------------------------------------------------------------------------
> # Rho parameter estimates the amount of population growth that is affected by 
> # each covariate. Here, we expect temperature to 
> # have a positive effect on species growth.
> 
> formulaR <- as.formula(~ temp)
> priorR  <- list(lo = list(temp = -0.05),
+                 hi = list(temp = 0.05))
> 
> #------------------------------------------------------------------------------
> # Alpha Priors: Density-Independent Species Interactions ( A * w * w' )
> #------------------------------------------------------------------------------
> # Alpha parameter is a matrix of parameters that estimate the interaction between 
> # species, i.e the effect that abundance of species i have on the abundance of 
> # species j 
> 
> alphaSign <- alpha
> alphaSign[alphaSign > -0.2 ] <- 0
> alphaSign[alphaSign <= -0.2 ] <- -1
> 
> ################################################################################
> # MODEL PARAMETERS
> ################################################################################
> 
> priorList <- list( formulaBeta = formulaB, formulaRho = formulaR, 
+                    betaPrior = priorB, rhoPrior = priorR, alphaSign = alpha)
> priors    <- gjamTimePrior(xdata, ydata, edata, priorList)
> timeList  <- mergeList(tlist, priors)
> 
> # Try setting the ng to 2000 and burnin to 500 for a longer run.
> effort <- list(columns = 1:ncol(edata), values = edata)
> modelList <- list( typeNames = 'DA', ng = 100, burnin = 10,  
+                    timeList = timeList, effort = effort ) 
> ################################################################################
> # RUN THE MODEL
> ################################################################################
> output <- gjam(formulaB, xdata, ydata, modelList)

Dimension reduced from 16 X 16 to 8 X 5 in Sigma
================================================================================================================================================================> save(output, file='gjamOutput.RData')
> 
> ################################################################################
> # PLOT OUTPUT
> ################################################################################
> # load("gjamOutputBBS/outputBBS.rdata")
> # load("outputSTOC.Rdata")
> # outputSTOC <- outputSTOC_2
> # 
> # library(viridis)
> # library(tidyverse)
> # #### all plots
> # nspecies = ncol(ydata)
> # specColor <- viridis(nspecies)
> # plotPars <- list(specColor = specColor, GRIDPLOTS=T, PLOTALLY=T, SAVEPLOTS = T,
> #                  outFolder = 'gjamOutput', width = 8, height = 6)
> # gjamPlot(output, plotPars)
> # 
> # save(output, file='gjamOutput/gjamOutput.RData')
> 
> #### RMSE
> # output$fit$DIC
> # 
> # output$fit$rmspeBySpec %>% as.tibble() %>% mutate("name" = names(output$fit$rmspeBySpec)) %>%
> #   ggplot() + 
> #   geom_bar(aes(y = name, x = value, fill = name), stat = "identity")+
> #   scale_fill_viridis_d(guide = F)
> # 
> # output$inputs$factorBeta$eCont
> 
> ####### equilibrium abundances #########""
> 
> # Equilibrium abundances can be evaluated here:
> # wstar <- .wrapperEquilAbund(outputSTOC, covars = 'temp',
> #                             nsim = 100, ngrid = 10, BYFACTOR = T, 
> #                             verbose = T)
> # 
> # save(wstar, file = "wstarSTOC_temp.Rdata")
> # # load("wstarSTOC.Rdata")
> # 
> # mean <- as.tibble(wstar$ccMu)
> # mean$temp <- wstar$x[, "temp"]
> # sd   <- as.tibble(wstar$ccSd)
> # sd$temp <- wstar$x[, "temp"]
> # 
> # 
> # test <- pivot_longer(mean, cols = -temp, values_to = "eq_abundance")
> # test2 <- pivot_longer(sd, cols = -temp , values_to = "eq_abundanceSD")
> # test$eq_abundanceSD <- test2$eq_abundanceSD
> # 
> # ggplot(test, aes(y = eq_abundance, x = temp, ymin = eq_abundance - eq_abundanceSD,
> #                  ymax = eq_abundance + eq_abundanceSD, col = name))+
> #   geom_pointrange()+
> #   geom_hline(yintercept = 0, linetype = 3)+
> #   geom_line()+
> #   scale_color_viridis_d(guide=F)+
> #   facet_wrap(~name, scales = "free_y")
> 
> 
> 
> 
> 
> proc.time()
    user   system  elapsed 
 446.196 1054.564  108.606 
